<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="ie=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=author content="Stuart Blackler ">
<meta name=description content="Welcome to the third edition of Observed! Your weekly newsletter, where I bring you a tip you can implement in your infrastructure across many categories like AWS, Terraform and General DevOps practices. This week's edition looks at Split Horizon DNS.">
<meta name=keywords content=",devops,observed">
<meta name=robots content="noodp">
<meta name=theme-color content>
<link rel=canonical href=https://im5tu.io/article/2023/01/observed-no.-3-understanding-split-horizon-dns-how-it-works-and-how-to-implement-it-in-aws/>
<title>
Observed No. 3 - Understanding Split Horizon DNS: How it works and How to Implement it in AWS :: Stuart Blackler's Blog
</title>
<link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css>
<link rel=stylesheet href=/main.4e5c639214707eff609bb55fe49e183dee42258a73bc90e4cc7b0a84f900798a.css>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/site.webmanifest>
<link rel=mask-icon href=/safari-pinned-tab.svg color>
<link rel="shortcut icon" href=/favicon.ico>
<meta name=msapplication-TileColor content>
<meta itemprop=name content="Observed No. 3 - Understanding Split Horizon DNS: How it works and How to Implement it in AWS">
<meta itemprop=description content="Welcome to the third edition of Observed! Your weekly newsletter, where I bring you a tip you can implement in your infrastructure across many categories like AWS, Terraform and General DevOps practices. This week's edition looks at Split Horizon DNS."><meta itemprop=datePublished content="2023-01-16T00:00:00+00:00">
<meta itemprop=dateModified content="2023-01-16T00:00:00+00:00">
<meta itemprop=wordCount content="349">
<meta itemprop=keywords content="devops,observed,">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Observed No. 3 - Understanding Split Horizon DNS: How it works and How to Implement it in AWS">
<meta name=twitter:description content="Welcome to the third edition of Observed! Your weekly newsletter, where I bring you a tip you can implement in your infrastructure across many categories like AWS, Terraform and General DevOps practices. This week's edition looks at Split Horizon DNS.">
<meta property="og:title" content="Observed No. 3 - Understanding Split Horizon DNS: How it works and How to Implement it in AWS">
<meta property="og:description" content="Welcome to the third edition of Observed! Your weekly newsletter, where I bring you a tip you can implement in your infrastructure across many categories like AWS, Terraform and General DevOps practices. This week's edition looks at Split Horizon DNS.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://im5tu.io/article/2023/01/observed-no.-3-understanding-split-horizon-dns-how-it-works-and-how-to-implement-it-in-aws/"><meta property="article:section" content="article">
<meta property="article:published_time" content="2023-01-16T00:00:00+00:00">
<meta property="article:modified_time" content="2023-01-16T00:00:00+00:00">
<meta property="article:section" content="devops">
<meta property="article:section" content="observed">
<meta property="article:published_time" content="2023-01-16 00:00:00 +0000 UTC">
<link rel=alternate type=application/rss+xml href=https://im5tu.io/article/2023/01/observed-no.-3-understanding-split-horizon-dns-how-it-works-and-how-to-implement-it-in-aws/index.xml title="Stuart Blackler's Blog">
<meta property="og:image" content="https://im5tu.io/img/profile.png">
<meta property="og:site_name" content="Stuart Blackler's Blog">
<link rel=alternate type=application/rss+xml href=/index.xml title="Stuart Blackler's Blog">
<link rel=preconnect href=https://api.github.com>
<link rel=preconnect href=https://partner.googleadservices.com>
<link rel=preconnect href=https://tpc.googlesyndication.com>
<link rel=preconnect href=https://www.googletagservices.com>
<link rel=preconnect href=https://googleads.g.doubleclick.net>
<link rel=preconnect href=https://pagead2.googlesyndication.com>
<link rel=preload href=/fonts/Inter-UI-Bold.woff2>
<link rel=preload href=/fonts/Inter-UI-Regular.woff2>
<style>.post{max-width:1200px}.header__inner{width:100%;max-width:1160px}.toolbar{display:none!important}.copy-code-button{float:right;display:block;padding:8px 12px;font-size:.9em;background-color:#e2e2e2;border-left:1px solid #e2e2e2;border-bottom:1px solid #e2e2e2;border-radius:0;border-bottom-left-radius:10px;transition:all 250ms ease;margin:-18px;opacity:0}.copy-code-button:hover{cursor:pointer;opacity:.7;border-style:solid}.copy-code-button:focus{background-color:#e2e2e2;outline:0;border-style:solid}.copy-code-button:active{background-color:#e2e2e2;opacity:.5;border-style:solid}pre:hover .copy-code-button{opacity:1}.copy-code-button~pre{position:relative}table{width:100%;border-collapse:collapse}table th{background-color:#cecece;color:#222}table tr{margin:0;padding:0}table tr:first-child{border-left:1px solid #acacac;border-top:1px solid #acacac;border-right:1px solid #acacac}table tr td:first-child{border-left:1px solid #acacac}table tr td:last-child{border-right:1px solid #acacac}table td,table th{padding:.5em;border-bottom:1px solid #acacac;margin:0}h2{margin-top:1.5em}h2 a:link,h2 a:visited,h3 a:link,h3 a:visited,h4 a:link,h4 a:visited,h5 a:link,h5 a:visited{text-decoration:none}h2 a:hover,h3 a:hover,h4 a:hover,h5 a:hover{text-decoration:underline}#promotions img{margin:20px auto}#sponsorMessage{width:100%;background:#f2cc8f;color:#242325;padding:10px;font-size:.9em}.flex-container{width:100%;display:inline-flex;justify-content:space-between}.flex-box{display:block}.hidden{display:hidden}@media print{.copy-code-button{display:none}}@media(prefers-color-scheme:dark){.copy-code-button{background-color:#969696;color:#323232}}</style>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QLMVXHCJ5K"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-QLMVXHCJ5K')</script>
<script data-ad-client=ca-pub-8597760177900459 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
</head>
<body>
<div class=container>
<header class=header>
<span class=header__inner>
<a href=/ style=text-decoration:none>
<div class=logo>
<span class=logo__mark>></span>
<span class=logo__text>im5tu.io</span>
<span class=logo__cursor>
</span>
</div>
</a>
<span class=header__right>
<nav class=menu>
<ul class=menu__inner><li><a href=/article/>Blog</a></li><li><a href=https://discord.codewithstu.tv>Discord</a></li><li><a href=https://news.codewithstu.tv>Newsletter</a></li><li><a href=https://www.patreon.com/CodeWithStu>Patreon</a></li><li><a href=/article/index.xml>RSS</a></li><li><a href=https://twitter.com/CodeWithStu>Twitter</a></li><li><a href=https://codewithstu.tv>YouTube</a></li>
</ul>
</nav>
<span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span>
</span>
</span>
</header>
<div class=content>
<main class=post>
<a id=sponsorLink href=/sponsorship ref=nofollow target=_blank>
<div id=sponsorMessage class=hidden></div>
</a>
<div class=post-info>
<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 minutes
</p>
</div>
<article>
<h1 class=post-title>
<a href=https://im5tu.io/article/2023/01/observed-no.-3-understanding-split-horizon-dns-how-it-works-and-how-to-implement-it-in-aws/>Observed No. 3 - Understanding Split Horizon DNS: How it works and How to Implement it in AWS</a>
</h1>
<div class=post-content>
<p>Welcome to the third edition of Observed! Your weekly newsletter, where I bring you a tip you can implement in your infrastructure across many categories like AWS, Terraform and General DevOps practices. This week&rsquo;s edition looks at Split Horizon DNS.</p>
<h2 id=what-is-split-horizon-dns>What is Split Horizon DNS?</h2>
<p>Split Horizon DNS is a technique used in DNS to provide different responses to queries depending on where the query originates. For example, a DNS request originating from inside your network may elicit a different response to a DNS request from a consumer of your application.</p>
<p>Splitting the responses by source can help ensure that only the resources which should be exposed to the internet are exposed. For example, an internal-only admin service would be an ideal candidate for not exposing to the internet, but we would want it addressable by our internal networks. In this case</p>
<p>With Split Horizon DNS, each zone responds with an authoritative answer. For example, in a traditional DNS setup where the DNS is not split, there is only one authoritative answer - your primary DNS nameserver. With split DNS, your internal DNS will respond with one answer, and the external DNS will respond with another - typically for an internal and external load balancer, respectively.</p>
<p>Split Horizon DNS is also known as Split View DNS, Split DNS or Split Brain DNS.</p>
<h2 id=how-to-set-up-split-horizon-dns-in-aws>How to set up Split Horizon DNS in AWS?</h2>
<p>To configure Split Horizon DNS, you perform the following steps:</p>
<ol>
<li>Create public and private hosted zones with the same name, for example: mydomain.com</li>
<li>Associate one or more VPCs with the private hosted zone. Route 53 Resolver uses the private hosted zone to route DNS queries in the specified VPCs.</li>
<li>Create records in each hosted zone. Records in the public-hosted zone control where internet traffic is routed, whilst records in the private-hosted zone control how traffic is routed internally.</li>
<li>Query your DNS</li>
</ol>
<p>If you have any questions or comments, please don’t hesitate to contact me either in the comments, on Twitter or any medium listed on my website! I’d love to hear your thoughts. Subscribe to the newsletter below!</p>
</div>
</article>
<hr>
<div id=recommended>
<h4>Book Recommendations</h4>
<p><i>The books below are ones I would personally buy again. All links are redirect to Amazon.</i></p>
<div class=flex-container>
<div class=flex-box><a href=https://geni.us/P3Jlg4 target=_blank ref=nofollow><img src=/img/affiliates/Book1.jpg width=150 height=200></a></div>
<div class=flex-box><a href=https://geni.us/qEg8Cx target=_blank ref=nofollow><img src=/img/affiliates/Book2.jpg width=150 height=200></a></div>
<div class=flex-box><a href=https://geni.us/k8HBxBA target=_blank ref=nofollow><img src=/img/affiliates/Book3.jpg width=150 height=200></a></div>
<div class=flex-box><a href=https://geni.us/4b2QcS target=_blank ref=nofollow><img src=/img/affiliates/Book4.jpg width=150 height=200></a></div>
</div>
</div>
<hr>
<div class=post-info>
<p>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://im5tu.io/tags/devops/>devops</a></span><span class=tag><a href=https://im5tu.io/tags/observed/>observed</a></span>
</p>
<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>349 Words</p>
<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2023-01-16 00:00 +0000</p>
</div>
<div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h></span>
<hr>
</div>
<div class=pagination__buttons>
<span class="button next">
<a href=https://im5tu.io/article/2023/01/observed-no.-2-upgrade-your-terraform-modules/>
<span class=button__text>Observed No. 2 - Upgrade Your Terraform Modules</span>
<span class=button__icon>→</span>
</a>
</span>
</div>
</div>
<hr>
<div id=promotions>
<h4>Offers From My Partners</h4>
<a href=https://bit.ly/3S9620C target=_blank>
<img src=https://www.awltovhc.com/image-100677210-15083122 width=728 height=90 alt="Free Domain Privacy">
</a>
</div>
<hr>
<script src=https://utteranc.es/client.js repo=Im5tu/im5tu.github.io issue-term=url label=Comment theme=photon-dark crossorigin=anonymous async></script>
</main>
</div>
<footer class=footer>
<hr>
<div class=footer__inner>
<div class=footer__content>
<iframe src=https://codewithstu.substack.com/embed width=480 height=320 style="border:1px solid #eee;background:#fff" frameborder=0 scrolling=no></iframe>
</div>
</div>
<hr>
<div class=footer__inner>
<div class=footer__content>
<span>&copy; 2023</span>
<span><a href=https://im5tu.io/>Stuart Blackler</a></span>
<span> <a href=https://im5tu.io/article/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span>
</div>
</div>
<div class=footer__inner>
<div class=footer__content>
<p>This site uses Google Analytics for Analytics only, so may contain cookies.</p>
</div>
</div>
</footer>
</div>
<script type=text/javascript src=/bundle.min.599099f1f14b78b657d524b28e10e0c5098e7cd46e9c7aed73d577068a276c3ff1bb234cbf29cb313333e83cf411727b43157c91ce5b809e2ffc81664614608e.js integrity="sha512-WZCZ8fFLeLZX1SSyjhDgxQmOfNRunHrtc9V3BoonbD/xuyNMvynLMTMz6Dz0EXJ7QxV8kc5bgJ4v/IFmRhRgjg=="></script>
<script src=/js/site-453fab6f.js defer></script>
</body>
</html>