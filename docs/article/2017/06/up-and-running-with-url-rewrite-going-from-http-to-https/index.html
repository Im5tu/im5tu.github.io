<!doctype html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="author" content="Stuart Blackler "><meta name="description" content="A quick introduction to URL Rewrite module for IIS and a snippet from going from HTTP to HTTPS."><meta name="keywords" content=",IIS,Url Rewrite,devops"><meta name="robots" content="noodp"><meta name="theme-color" content><link rel="canonical" href="https://im5tu.io/article/2017/06/up-and-running-with-url-rewrite-going-from-http-to-https/"><title>Up and running with URL Rewrite - going from HTTP to HTTPS :: CodeWithStu's Blog</title><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" integrity="sha512-Cv93isQdFwaKBV+Z4X8kaVBYWHST58Xb/jVOcV9aRsGSArZsgAnFIhMpDoMDcFNoUtday1hdjn0nGp3+KZyyFw==" crossorigin="anonymous" referrerpolicy="no-referrer"><link rel="stylesheet" href="https://im5tu.io/main.b78c3be9451dc4ca61ca377f3dc2cf2e6345a44c2bae46216a322ef366daa399.css" integrity="sha256-t4w76UUdxMphyjd/PcLPLmNFpEwrrkYhajIu82bao5k="><link rel="apple-touch-icon" sizes="180x180" href="https://im5tu.io/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://im5tu.io/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://im5tu.io/favicon-16x16.png"><link rel="manifest" href="https://im5tu.io/site.webmanifest"><link rel="mask-icon" href="https://im5tu.io/safari-pinned-tab.svg" color><link rel="shortcut icon" href="https://im5tu.io/favicon.ico"><meta name="msapplication-TileColor" content><meta itemprop="name" content="Up and running with URL Rewrite - going from HTTP to HTTPS"><meta itemprop="description" content="A quick introduction to URL Rewrite module for IIS and a snippet from going from HTTP to HTTPS."><meta itemprop="datePublished" content="2017-06-03T15:00:51+01:00"><meta itemprop="dateModified" content="2017-06-03T15:00:51+01:00"><meta itemprop="wordCount" content="605"><meta itemprop="keywords" content="IIS,Url Rewrite,devops,"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Up and running with URL Rewrite - going from HTTP to HTTPS"><meta name="twitter:description" content="A quick introduction to URL Rewrite module for IIS and a snippet from going from HTTP to HTTPS."><meta property="og:title" content="Up and running with URL Rewrite - going from HTTP to HTTPS"><meta property="og:description" content="A quick introduction to URL Rewrite module for IIS and a snippet from going from HTTP to HTTPS."><meta property="og:type" content="article"><meta property="og:url" content="https://im5tu.io/article/2017/06/up-and-running-with-url-rewrite-going-from-http-to-https/"><meta property="article:section" content="article"><meta property="article:published_time" content="2017-06-03T15:00:51+01:00"><meta property="article:modified_time" content="2017-06-03T15:00:51+01:00"><meta property="og:see_also" content="https://im5tu.io/article/2017/06/ensuring-samesite-cookies-with-url-rewrite/"><meta property="og:see_also" content="https://im5tu.io/article/2017/06/ensuring-secure-cookies-with-url-rewrite/"><meta property="og:see_also" content="https://im5tu.io/article/2017/06/ensuring-httponly-cookies-with-url-rewrite/"><meta property="og:see_also" content="https://im5tu.io/article/2017/06/removing-trailing-slashes-with-url-rewrite/"><meta property="og:see_also" content="https://im5tu.io/article/2017/06/canonical-host-urls-with-url-rewrite/"><meta property="article:section" content="Development"><meta property="article:published_time" content="2017-06-03 15:00:51 +0100 +0100"><meta property="og:image" content="https://im5tu.io/img/profile.png"><meta property="og:site_name" content="CodeWithStu's Blog"><link rel="alternate" type="application/rss+xml" href="https://im5tu.io/article/index.xml" title="Stuart Blackler's Blog"><link rel="preconnect" href="https://api.github.com"><link rel="preconnect" href="https://partner.googleadservices.com"><link rel="preconnect" href="https://tpc.googlesyndication.com"><link rel="preconnect" href="https://www.googletagservices.com"><link rel="preconnect" href="https://googleads.g.doubleclick.net"><link rel="preconnect" href="https://pagead2.googlesyndication.com"><link rel="preload" href="https://im5tu.io/fonts/Inter-UI-Bold.woff2"><link rel="preload" href="https://im5tu.io/fonts/Inter-UI-Regular.woff2"><style>body p{line-height:1.8em}main{padding:4em 0 0}a:hover{color:#004dc9}.post,.posts{max-width:1400px;padding:4em 0 0}.header__inner{width:100%;max-width:1400px}ul.menu__inner{padding-right:0}ul.menu__inner li:last-of-type{margin-right:0}.logo__cursor{background:#3b82f6}.toolbar{display:none!important}.copy-code-button{float:right;display:block;padding:8px 12px;font-size:.9em;background-color:#e2e2e2;border-left:1px solid #e2e2e2;border-bottom:1px solid #e2e2e2;border-radius:0;border-bottom-left-radius:10px;transition:all 250ms ease;margin:-18px;opacity:0}.copy-code-button:hover{cursor:pointer;opacity:.7;border-style:solid}.copy-code-button:focus{background-color:#e2e2e2;outline:0;border-style:solid}.copy-code-button:active{background-color:#e2e2e2;opacity:.5;border-style:solid}pre:hover .copy-code-button{opacity:1}.copy-code-button~pre{position:relative}table{width:100%;border-collapse:collapse}table th{background-color:#cecece;color:#222}table tr{margin:0;padding:0}table tr:first-child{border-left:1px solid #acacac;border-top:1px solid #acacac;border-right:1px solid #acacac}table tr td:first-child{border-left:1px solid #acacac}table tr td:last-child{border-right:1px solid #acacac}table td,table th{padding:.5em;border-bottom:1px solid #acacac;margin:0}h2{margin-top:1.5em}h2 a:link,h2 a:visited,h3 a:link,h3 a:visited,h4 a:link,h4 a:visited,h5 a:link,h5 a:visited{text-decoration:none}h2 a:hover,h3 a:hover,h4 a:hover,h5 a:hover{text-decoration:underline}#promotions img{margin:20px auto}#sponsorMessage{width:100%;background:#ffdf00;color:#242325;padding:10px;font-size:.9em}.flex-container{width:100%;display:inline-flex;justify-content:space-between}.flex-box{display:block}.hidden{display:hidden}.post-title{font-weight:700}.post-summary{font-style:italic;font-size:.8em;color:#222}.post-tags{font-size:.9em}.post-tags span.tag{margin:0 .5em;color:#111;text-decoration:underline}#introduction{margin:0 auto;text-align:center}#introduction p{display:block;text-align:center}#introduction p:first-child{font-weight:700;font-size:1.4em}#introduction p:nth-child(2){font-size:1.3em;font-style:italic}#introduction-container{width:80%;max-width:1400px;text-align:center}#introduction-whatido{margin-top:2em;background-color:#fafafa;width:100%;padding:3em 0}#introduction-whatido *{text-align:center}#introduction-whatido p{text-align:left}#introduction-whatido .flex-box{margin:0 2.5em;width:100%}#introduction-whatido .flex-box span.home-link{font-size:1.8em;margin-bottom:2em;color:#0665ff;font-weight:700;text-align:center}#introduction-whatido .flex-box span.home-link a,#introduction-whatido .flex-box span.home-link a:link{text-align:center;text-decoration:none}.footer{padding:0}#scroll-progress{position:absolute;bottom:0;left:0;width:0%;height:4px;background:#0665ff;z-index:10000}.header{position:fixed;top:0;width:100%;z-index:10000}@media print{.copy-code-button{display:none}}@media(prefers-color-scheme:dark){.copy-code-button{background-color:#969696;color:#323232}.post-summary,.post-tags span.tag{color:#eaeaea}}@media(max-width:1450px){.post,.posts,main{padding:4em}}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-QLMVXHCJ5K"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QLMVXHCJ5K")</script><script data-ad-client="ca-pub-8597760177900459" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script></head><body><div class="container"><header class="header"><span class="header__inner"><a href="https://im5tu.io/" style="text-decoration:none"><div class="logo"><span class="logo__mark">></span>
<span class="logo__text">im5tu.io</span>
<span class="logo__cursor"></span></div></a><span class="header__right"><nav class="menu"><ul class="menu__inner"><li><a href="https://im5tu.io/article/">Blog</a></li><li><a href="https://news.codewithstu.tv">Newsletter</a></li><li><a href="https://www.patreon.com/CodeWithStu">Patreon</a></li><li><a href="https://twitter.com/CodeWithStu">Twitter</a></li><li><a href="https://codewithstu.tv">YouTube</a></li></ul></nav><span class="menu-trigger"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span></span></span><div id="scroll-progress"></div></header><div class="content"><main class="post"><div style="font-style:italic;width:100%;background-color:#ffe12b;color:#333;text-align:center;padding:1px"><p>This page is available to sponsor. <a id="sponsorLink" href="https://im5tu.io/sponsorship/" ref="nofollow" target="_blank">Click Here</a> for more details!</p></div><div class="post-info"><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>3 minutes</p></div><article><h1 class="post-title"><a href="https://im5tu.io/article/2017/06/up-and-running-with-url-rewrite-going-from-http-to-https/">Up and running with URL Rewrite - going from HTTP to HTTPS</a></h1><hr><aside id="toc"><div class="toc-title">Table of Contents</div><nav id="TableOfContents"><ul><li><a href="#what-is-url-rewrite">What is URL Rewrite?</a></li><li><a href="#url-rewrite-and-webconfig">URL Rewrite and Web.Config</a></li><li><a href="#redirecting-http-to-https">Redirecting HTTP to HTTPS</a></li></ul></nav></aside><hr><div class="post-content"><div style="font-style:italic;width:100%;background-color:#63e5ff;color:#333;text-align:center;padding:5px"><p>This post is part of the <a href="#series" style="font-weight:700">Url Rewriting</a> series.</p></div><p>In this series, I am going to take you through a few <code>web.config</code> snippets that have come in handy for me when using URL Rewrite on IIS. Firstly, I am going to introduce the URL Rewrite module then show a sample of going from HTTP to HTTPS.</p><h2 id="what-is-url-rewrite">What is URL Rewrite?</h2><p><a href="https://www.iis.net/downloads/microsoft/url-rewrite">URL Rewrite</a> is a module extensions for IIS which allows administrators to create powerful inbound and outbound rules that alter a HTTP request or response. Scenarios where you might consider using the URL Rewrite module include:</p><ul><li>Rewrite URLs based on the values of server variables or HTTP headers</li><li>Provide SEO benefits such as canonical host names</li><li>Setup redirects from old posts to new</li></ul><p><em>URL rewrite can be install from the <a href="http://go.microsoft.com/fwlink/?LinkID=615137">Web Platform Installer</a> for IIS 7.5 or above.</em></p><h2 id="url-rewrite-and-webconfig">URL Rewrite and Web.Config</h2><p>Inside of the <code>web.config</code> you can define a <code>&lt;rewrite></code> section beneath the <code>&lt;system.web></code> section:</p><pre><code class="language-xml">&lt;system.web&gt;
    &lt;rewrite&gt;
        &lt;!-- Your rules here --&gt;
    &lt;/rewrite&gt;
&lt;/system.web&gt;
</code></pre><p>Within the <code>&lt;rewrite></code> section you can define either a <code>&lt;rules></code> section or an <code>&lt;outbound></code> section. The former is for inbound request rewriting and the latter is for response rewriting. I&rsquo;ll expand on each section as we go through the series.</p><p><em><strong>Note:</strong> if you don&rsquo;t have the URL Rewrite module installed, you&rsquo;ll get a lovely yellow screen of death when you start your application.</em></p><h2 id="redirecting-http-to-https">Redirecting HTTP to HTTPS</h2><p>The are some obvious benefits to serving pages over a secure connection (HTTPS), which include:</p><ul><li>Encryption: The data exchanged between client and server cannot easily be read</li><li>Authority: Proving that the server you are talking to is who you are expecting to talk to</li></ul><p>However, there are a few lesser known benefits including:</p><ul><li>SEO: Search engines are preferring websites that are secure by default</li><li>HTTP2: Major browsers do not support HTTP2 over insecure connections</li></ul><p>Assuming you would like all of the above benefit, here is the rule snippet that you will need:</p><pre><code class="language-xml">&lt;system.web&gt;
    &lt;rewrite&gt;
        &lt;rules&gt;
            &lt;rule name=&quot;Redirect to http&quot; patternSyntax=&quot;Wildcard&quot; stopProcessing=&quot;true&quot;&gt;
            &lt;match url=&quot;*&quot; negate=&quot;false&quot; /&gt;
            &lt;conditions logicalGrouping=&quot;MatchAny&quot; trackAllCaptures=&quot;false&quot;&gt;
                    &lt;add input=&quot;{HTTPS}&quot; pattern=&quot;off&quot; /&gt;
                &lt;/conditions&gt;
            &lt;action type=&quot;Redirect&quot; url=&quot;https://{HTTP_HOST}/{R:1}&quot; redirectType=&quot;Temporary&quot; /&gt;
        &lt;/rule&gt;
        &lt;/rules&gt;
    &lt;/rewrite&gt;
&lt;/system.web&gt;
</code></pre><p>So what&rsquo;s going on in the snippet above?</p><p>In the first line, we are defining the name of the rule which can be viewed inside of <code>inetmgr (IIS Manager)</code>; saying which pattern style we are going to use (either regex or wildcard) and saying that we want to stop at this rule and return the response to the client. Next up, we give our matching criteria which we have wildcarded to match all requests. Then we have added a condition which takes a server variable (<code>{HTTPS}</code> which indicates whether or not this request has been delivered over a secure connection), and made sure we only track insecure requests.</p><p><em>With conditions inside of a rule, you can match a single entry in the condition set or all the conditions within the set. Use either <code>MatchAny</code> or <code>MatchAll</code> depending on your needs.</em></p><p>Finally, we define the action that we wish to take if both the <code>match</code> and <code>conditions</code> sections have been satisfied. The action <code>type</code> can be <code>Redirect</code> or <code>Rewrite</code> depending on your needs. We wish to redirect a user to a secure connection, so we define the type as <code>Redirect</code> and the url equal to a secure connection to the host requested with the original path & query appended. The final attribute is the redirect type which can be one of the following:</p><ul><li>Permenant: <a href="https://httpstatuses.com/301">A HTTP 301 Response</a></li><li>Found: <a href="https://httpstatuses.com/302">A HTTP 302 Response</a></li><li>SeeOther: <a href="https://httpstatuses.com/303">A HTTP 303 Response</a></li><li>Temporary: <a href="https://httpstatuses.com/307">A HTTP 307 Response</a></li></ul><p>That&rsquo;s it! Hopefully this article gives you everything that you need to get HTTP to HTTPS redirects working.</p></div></article><hr><div class="post-info"><a name="series"></a>
<b>More in the Url Rewriting series:</b><ol><li><b>Up and running with URL Rewrite - going from HTTP to HTTPS <i>(This article)</i></b></li><li><a href="https://im5tu.io/article/2017/06/canonical-host-urls-with-url-rewrite/">Canonical host urls with URL Rewrite</a></li><li><a href="https://im5tu.io/article/2017/06/removing-trailing-slashes-with-url-rewrite/">Removing trailing slashes with URL Rewrite</a></li><li><a href="https://im5tu.io/article/2017/06/ensuring-httponly-cookies-with-url-rewrite/">Ensuring httpOnly cookies with URL Rewrite</a></li><li><a href="https://im5tu.io/article/2017/06/ensuring-secure-cookies-with-url-rewrite/">Ensuring secure cookies with URL Rewrite</a></li><li><a href="https://im5tu.io/article/2017/06/ensuring-samesite-cookies-with-url-rewrite/">Ensuring samesite cookies with URL Rewrite</a></li></ol><p><a href="https://im5tu.io/series/url-rewriting/">View All Articles</a></p><hr><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class="tag"><a href="https://im5tu.io/tags/iis/">IIS</a></span><span class="tag"><a href="https://im5tu.io/tags/url-rewrite/">Url Rewrite</a></span><span class="tag"><a href="https://im5tu.io/tags/devops/">devops</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>605 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2017-06-03</p></div><hr><div id="promotions"><a href="https://geni.us/cws-springer" target="_blank"><img src="https://www.awltovhc.com/image-100677210-15518210" width="728" height="90" alt="Apress eBook Sale is here now! - Order selected eBooks for $12.99 each. (3rd-20th May)"></a>
<a href="https://geni.us/cws-namecheap" target="_blank"><img src="https://www.awltovhc.com/image-100677210-14326263" width="728" height="90" alt="Popular Domains for just 99 Cents at Namecheap!"></a>
<a href="https://geni.us/cws-mailchimp" target="_blank"><img src="https://www.ftjcfx.com/image-100677210-15488213" width="728" height="90" alt="See upto 88% more revenue with predictive segments!"></a></div></main></div><footer class="footer"><hr><div class="footer__inner"><div class="footer__content"><iframe src="https://codewithstu.substack.com/embed" width="480" height="320" frameborder="0" scrolling="no"></iframe></div></div><hr><div><div class="footer__inner"><div class="footer__content"><span>&copy; 2023</span>
<span><a href="https://im5tu.io/">Stuart Blackler</a></span>
<span><a href="https://im5tu.io/article/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div><p><a href="https://im5tu.io/tags">Tags</a> | <a href="https://im5tu.io/categories">Categories</a> | <a href="https://im5tu.io/sitemap.xml">Sitemap</a></p></div><div><p>This site uses Google Analytics for Analytics only, so may contain cookies.</p></div></div></footer></div><script type="text/javascript" src="https://im5tu.io/bundle.min.205d491810c28f95aa953fae884e1c27abe13fdf93ec63b882d0036b248d4a6282eb2d134e4e7225c6ad6e86db87b08488a361ca4a7383d01fcff43f3d57b9c3.js" integrity="sha512-IF1JGBDCj5WqlT+uiE4cJ6vhP9+T7GO4gtADaySNSmKC6y0TTk5yJcatbobbh7CEiKNhykpzg9Afz/Q/PVe5ww=="></script>
<script src="https://im5tu.io/js/site-004f8284.js" defer></script></body></html>